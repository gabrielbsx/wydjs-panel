<script>
    //Author: Kentaro
    var removeHomeClass = !(location.hash === '#home' || location.hash === '');
    if (!location.hash.length) {
        $('a[href*="#home"]').parent().addClass('active');
        var currentElement = $('li.active').children('a');
    } else {
        var elem = $(`a[href*="${location.hash}"]:first`);
        elem = elem.parent().parent().parent().parent().is('li') ? elem.parent().parent().parent().parent() : elem.parent();
        elem.addClass('active');
        var currentElement = elem;
    }

    var pages = ['home', 'donate', 'donate-rules', 'ranking-players', 'ranking-cities', 'guildmark', 'change-password', 'recovery-numeric-password'];

    async function addGuildname(guildname, guildid) {
        
    }
    async function getGuildname(id) {
        
    }
    async function verifyGuild() {
        $.get("/guildinfo", (data) => {
            console.log(data);
        });
    }
    async function setpage(page, element) {
        var button = $(element).parent().parent().parent().parent();
        button = button.is('li') ? button : $(element).parent();

        if (currentElement) {
            $(currentElement).removeClass('active');
            var oldButton = $(currentElement).parent().parent().parent().parent();
            oldButton = oldButton.is('li') ? oldButton : $(currentElement).parent();
            oldButton.removeClass('active');
            button.addClass('active');
        }

        if ($(`.${page}:visible`).length) {
            $(`.${page}`).hide('slow');
        } else {
            pages.forEach(async (value) => {
                if (value === page) {
                    $(`.${value}`).show('slow');
                    $(element).addClass('active');
                    currentElement = element;
                    return;
                }
                $(`.${value}`).hide('slow');
            });
        }
    }
    $(document).ready(async () => {
        if (removeHomeClass)  $('a[href*="#home"]').parent().removeClass('active');
    });
</script>